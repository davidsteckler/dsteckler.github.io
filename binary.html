<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Binary Boxes Game</title>
    <style>
        body {
            text-align: center;
            font-family: Arial, sans-serif;
            background-color: #ffffff;
            color: #333333;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }
        h1 {
            color: #333;
            margin-bottom: 20px;
        }
        .game-container {
            max-width: 800px;
            width: 100%;
        }
        #boxes {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }
        .box-container {
            display: inline-block;
            position: relative;
        }
        .box-label {
            position: absolute;
            top: -25px;
            width: 100%;
            text-align: center;
            font-weight: bold;
            color: #333;
            font-size: 1.2em;
        }
        .box, .bulb {
            width: 70px;
            height: 70px;
            border: 2px solid #333;
            line-height: 70px;
            font-size: 1.5em;
            font-weight: bold;
            background-color: #fff;
            color: #333;
            transition: all 0.3s ease;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .box.on {
            background-color: yellow;
            color: #333;
        }
        .bulb {
            border-radius: 50% 50% 10% 10%;
            background-color: #f0f0f0;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        .bulb.on {
            background-color: yellow;
            box-shadow: 0 0 20px yellow;
        }
        #placeValueSum {
            font-size: 1.2em;
            margin: 10px 0;
            color: #666;
        }
        #numberDisplay, #binaryDisplay {
            font-size: 1.5em;
            margin: 10px 0;
        }
        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }
        .toggle-container {
            display: flex;
            align-items: center;
        }
        .toggle-label {
            margin-right: 10px;
        }
        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: #2196F3;
        }
        input:checked + .slider:before {
            transform: translateX(26px);
        }
        .button-container {
            margin-top: 20px;
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            background-color: #333;
            color: #fff;
            border: none;
            border-radius: 5px;
            transition: background-color 0.3s ease;
            margin: 0 5px;
        }
        button:hover {
            background-color: #555;
        }
        .info-section {
            margin: 20px 0;
            text-align: left;
            max-width: 800px;
        }
        .info-section h2 {
            margin-bottom: 10px;
            color: #333;
        }
        .info-section p {
            margin-bottom: 10px;
            color: #666;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <h1>Binary Boxes Game</h1>
    
    <div class="game-container">
        <div class="info-section">
            <h2>What is Binary?</h2>
            <p>
                Binary is the language of computers, using just two digits: 0 and 1. In our everyday world, we use the decimal system with ten digits, but computers think in this simple binary code.
            </p>
            <p>
                Each box or bulb below represents a binary digit or 'bit'. When it's on (yellow), it adds its value to the total. The rightmost bit is worth 1, and each bit to the left doubles in value.
            </p>
            <p>
                Experiment with the bits below. Toggle them on and off, and watch how the decimal number changes. Can you create specific numbers? This is how computers build complex data from simple on/off switches!
            </p>
        </div>

        <div id="boxes"></div>

        <div id="placeValueSum">Sum: = 0</div>

        <div id="numberDisplay">Decimal: 0</div>
        <div id="binaryDisplay">Binary: 00000000</div>

        <div class="controls">
            <div class="toggle-container">
                <span class="toggle-label">Boxes/Bulbs:</span>
                <label class="switch">
                    <input type="checkbox" id="boxesToggle" checked>
                    <span class="slider"></span>
                </label>
            </div>
            <div class="toggle-container">
                <span class="toggle-label">Game Mode:</span>
                <label class="switch">
                    <input type="checkbox" id="gameModeToggle">
                    <span class="slider"></span>
                </label>
            </div>
            <div class="toggle-container">
                <span class="toggle-label">Labels:</span>
                <label class="switch">
                    <input type="checkbox" id="labelsToggle" checked>
                    <span class="slider"></span>
                </label>
            </div>
        </div>

        <div class="button-container">
            <button onclick="resetBits()">Reset</button>
            <button onclick="randomizeBits()">Randomize</button>
        </div>

        <div id="alert" style="display: none; margin-top: 20px; padding: 10px; background-color: #f0f0f0; border-radius: 5px;">
            <span>Create the binary representation of: <span id="target"></span></span>
            <button id="newChallengeButton" style="display: none;" onclick="startNewGame()">New Challenge</button>
        </div>
    </div>

    <script>
        let bits = [0, 0, 0, 0, 0, 0, 0, 0];
        let target = 0;
        const boxesToggle = document.getElementById('boxesToggle');
        const gameModeToggle = document.getElementById('gameModeToggle');
        const labelsToggle = document.getElementById('labelsToggle');
        const alertElement = document.getElementById('alert');
        const targetElement = document.getElementById('target');
        const newChallengeButton = document.getElementById('newChallengeButton');
        const placeValueSumElement = document.getElementById('placeValueSum');
        const boxesContainer = document.getElementById('boxes');

        function createBits() {
            boxesContainer.innerHTML = '';
            const values = [128, 64, 32, 16, 8, 4, 2, 1];
            values.forEach((value, index) => {
                const container = document.createElement('div');
                container.className = 'box-container';
                
                const label = document.createElement('div');
                label.className = 'box-label';
                label.textContent = value;
                
                const bit = document.createElement('div');
                bit.className = boxesToggle.checked ? 'box' : 'bulb';
                bit.textContent = '0';
                
                bit.addEventListener('click', () => toggleBit(index));
                
                container.appendChild(label);
                container.appendChild(bit);
                boxesContainer.appendChild(container);
            });
        }

        function toggleBit(index) {
            bits[index] = 1 - bits[index];
            updateDisplay();
        }

        function updateDisplay() {
            const bitElements = document.querySelectorAll('.box, .bulb');
            bitElements.forEach((element, index) => {
                element.classList.toggle('on', bits[index] === 1);
                element.textContent = bits[index];
            });

            let number = bits.reduce((acc, bit, index) => acc + bit * Math.pow(2, 7 - index), 0);
            let binary = bits.join('');
            document.getElementById('numberDisplay').textContent = `Decimal: ${number}`;
            document.getElementById('binaryDisplay').textContent = `Binary: ${binary}`;
            
            let placeValueSum = bits.reduce((sum, bit, index) => {
                let placeValue = Math.pow(2, 7 - index);
                return sum + (bit === 1 ? `${placeValue} + ` : '');
            }, '').slice(0, -3) || '0';
            placeValueSumElement.textContent = `Sum: ${placeValueSum} = ${number}`;

            if (gameModeToggle.checked) {
                document.getElementById('numberDisplay').textContent = `Decimal: ${number} | Target: ${target}`;
                if (number === target) {
                    newChallengeButton.style.display = 'inline-block';
                    alertElement.innerHTML = `<span>Congratulations! You've reached the target: ${target}</span>
                                              <button onclick="startNewGame()">New Challenge</button>`;
                } else {
                    newChallengeButton.style.display = 'none';
                }
            }
        }

        function resetBits() {
            bits = [0, 0, 0, 0, 0, 0, 0, 0];
            updateDisplay();
        }

        function randomizeBits() {
            bits = bits.map(() => Math.round(Math.random()));
            updateDisplay();
        }

        function startNewGame() {
            target = Math.floor(Math.random() * 256);
            targetElement.textContent = target;
            resetBits();
            alertElement.style.display = 'block';
            alertElement.innerHTML = `<span>Create the binary representation of: ${target}</span>`;
            newChallengeButton.style.display = 'none';
        }

        boxesToggle.addEventListener('change', () => {
            createBits();
            updateDisplay();
        });

        gameModeToggle.addEventListener('change', () => {
            if (gameModeToggle.checked) {
                startNewGame();
            } else {
                alertElement.style.display = 'none';
                updateDisplay();
            }
        });

        labelsToggle.addEventListener('change', () => {
            document.querySelectorAll('.box-label').forEach(label => {
                label.style.display = labelsToggle.checked ? 'block' : 'none';
            });
        });

        // Initialize the game
        createBits();
        updateDisplay();
    </script>
</body>
</html>
